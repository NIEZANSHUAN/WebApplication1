<?php
require("../../include/connect_db.php");
if($act=="save")
{// 修改
$sql="update teacher set userPass='$userPass',tname='$tname',tsex='$tsex',remark='$remark',course='$course',tclass='$tclass' where userName='$userName'";
mysql_query($sql);
header("location:showTeacher.php");
}
//取出修改数据
$sql="select * from teacher where userName='$userName'";
$data=getone($sql);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>无标题文档</title>
<style type="text/css">
<!--
body {
	margin-left: 3px;
	margin-top: 0px;
	margin-right: 3px;
	margin-bottom: 0px;
}
.STYLE6 {color: #000000; font-size: 12; }
.STYLE10 {color: #000000; font-size: 12px; }
.STYLE25 {color: #000000; font-size: 24px; }
-->
</style>
<script>
var  highlightcolor='#d5f4fe';
var  clickcolor='#51b2f6';
function  changeto(){
source=event.srcElement;
if  (source.tagName=="TR"||source.tagName=="TABLE")
return;
while(source.tagName!="TD")
source=source.parentElement;
source=source.parentElement;
cs  =  source.children;
//alert(cs.length);
if  (cs[1].style.backgroundColor!=highlightcolor&&source.id!="nc"&&cs[1].style.backgroundColor!=clickcolor)
for(i=0;i<cs.length;i++){
	cs[i].style.backgroundColor=highlightcolor;
}
}

function  changeback(){
if  (event.fromElement.contains(event.toElement)||source.contains(event.toElement)||source.id=="nc")
return
if  (event.toElement!=source&&cs[1].style.backgroundColor!=clickcolor)
//source.style.backgroundColor=originalcolor
for(i=0;i<cs.length;i++){
	cs[i].style.backgroundColor="";
}
}

function  clickto(){
source=event.srcElement;
if  (source.tagName=="TR"||source.tagName=="TABLE")
return;
while(source.tagName!="TD")
source=source.parentElement;
source=source.parentElement;
cs  =  source.children;
//alert(cs.length);
if  (cs[1].style.backgroundColor!=clickcolor&&source.id!="nc")
for(i=0;i<cs.length;i++){
	cs[i].style.backgroundColor=clickcolor;
}
else
for(i=0;i<cs.length;i++){
	cs[i].style.backgroundColor="";
}
}
</script>


</head>

<body>
<form method="post" action="?act=save&userName=<?php echo $userName?>">
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td><table width="100%" border="0" cellpadding="0" cellspacing="1" bgcolor="#a8c7ce" onmouseover="changeto()"  onmouseout="changeback()">

      <tr>
        <td width="23%" height="20" bgcolor="d3eaef" class="STYLE10"><div align="center"></div></td>
        <td width="77%" height="20" bgcolor="d3eaef" class="STYLE25">修改教师</td>
      </tr>
	  <tr>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="center">用户名：</div></td>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><input type="text" name="userName" value="<?php echo $userName?>" readonly/></td>
      </tr>
	  <tr>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="center">密码：</div></td>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><input type="text" name="userPass" value="<?php echo $data[userPass]?>"/></td>
      </tr>
      <tr>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="center">姓名：</div></td>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><input type="text" name="tname" value="<?php echo $data[tname]?>"/></td>
      </tr>
	 <tr>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="center">性别：</div></td>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><label for="tsex"></label>
          <select name="tsex" id="tsex">
            <option value="男">男</option>
            <option value="女">女</option>
          </select></td>
      </tr>
	  <tr>
	    <td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="center">学院：</div></td>
	    <td height="20" bgcolor="#FFFFFF" class="STYLE6"><select name="tclass" id="select">
              <?php
			 $sql1="select * from xueyuan ";
$result1=mysql_query($sql1);

while($data1=mysql_fetch_array($result1))
		echo "<option value=$data1[id]>$data1[name]</option>";


				?>
              </select></td>
	    </tr>
	   <tr>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="center">课程：</div></td>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><select name="course" id="select">
              <?php
			 $sql1="select * from course ";
$result1=mysql_query($sql1);

while($data1=mysql_fetch_array($result1))
		echo "<option value=$data1[id]>$data1[name]</option>";


				?>
              </select></td>
      </tr>
	  <tr>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="center">备注：</div></td>
        <td height="20" bgcolor="#FFFFFF" class="STYLE6"><textarea name="remark" cols="50" rows="5"><?php echo $data[remark]?></textarea></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td height="30"><input type="submit" value="修改" />
      <input type="reset" /></td>
  </tr>
</table>
</form>
</body>
</html>
